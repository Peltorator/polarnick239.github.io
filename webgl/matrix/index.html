<!DOCTYPE html>
<html style="height: 100%">
<head lang="en">
    <meta charset="UTF-8">
    <title>Matrix digital rain</title>
</head>

<script id="matrix_vshader" type="x-shader/x-vertex">
    attribute vec2 aPosition;

    varying vec2 vPosition;

    void main() {
        vPosition = (aPosition + 1.0) / 2.0;
        gl_Position = vec4(aPosition, 0.0, 1.0);
    }
</script>

<script id="matrix_fshader" type="x-shader/x-fragment">
    precision mediump float;

    const float fontsXCount = 16.0;
    const float fontsYCount = 5.0;
    const float fontsWidth = (995.0/1024.0)/fontsXCount;
    const float fontsHeight = (430.0/512.0)/fontsYCount;

    uniform sampler2D uFonts;

    varying vec2 vPosition;

    vec2 getFontCenter(float i, float j) {
        return vec2(fontsWidth * (i + 0.5), fontsHeight * (j + 0.5));
    }

    void main() {
        vec2 position = vPosition;
        position.y = 1.0 - position.y;
        position = position * vec2(fontsWidth, fontsHeight) * vec2(fontsXCount, fontsYCount);
        vec3 color = texture2D(uFonts, position).rgb;
        gl_FragColor = vec4(color, 1.0);
    }
</script>

<script src="build/main.js"></script>
<script src="js/glMatrix.js"></script>
<script>
    function start() {
        var canvas = document.getElementById('webgl_canvas');
        matrix.start(canvas,
                document.getElementById('matrix_vshader').text,
                document.getElementById('matrix_fshader').text,
                'fonts.png');
    }
</script>

<body onload="start()" style="margin: 0; padding: 0; height: 100%">
    <canvas id="webgl_canvas" style="width: 100%; height: 100%; display:block;"></canvas>
</body>
</html>